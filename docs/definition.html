
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPIF Definition &#8212; Python  documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Structure" href="structure.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="structure.html" title="Structure"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Python  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">SPIF Definition</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="spif-file-definition">
<h1>SPIF File Definition<a class="headerlink" href="#spif-file-definition" title="Permalink to this headline">¶</a></h1>
<p>The SPIF group structure is below with optional groups shown in <em>italics</em></p>
<blockquote>
<div><div class="line-block">
<div class="line">root</div>
<div class="line">│</div>
<div class="line">├── instrument 1</div>
<div class="line">│   ├── “core”</div>
<div class="line">│   ├── <em>“aux”</em></div>
<div class="line">│   ├── <em>level-0</em></div>
<div class="line">│   │   └── <em>level-1</em></div>
<div class="line">│   └── <em>level-2</em></div>
<div class="line">│</div>
<div class="line">├── <em>instrument 2</em></div>
<div class="line">:</div>
</div>
</div></blockquote>
<p>Contents of a SPIF file are;</p>
<blockquote>
<div><dl class="simple">
<dt><a class="reference internal" href="#root">root</a></dt><dd><p>The root of the SPIF file contains global attributes associated with the file.</p>
</dd>
<dt><a class="reference internal" href="#instrument">instrument</a> group</dt><dd><p>Data from each instrument channel data is included within a separate group. All metadata relevant to an instrument channel plus universal variables are included in the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> root. Many instruments will only have a single channel but in all cases the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> group exists to maintain a consistant structure.</p>
</dd>
<dt><a class="reference internal" href="#core">core</a></dt><dd><p>The spif-core group contains the raw image data. Coordinate variables are <code class="docutils literal notranslate"><span class="pre">image_num</span></code> and <code class="docutils literal notranslate"><span class="pre">pixel</span></code>.</p>
</dd>
<dt><a class="reference internal" href="#aux">aux</a></dt><dd><p>The spif-aux group contains additional data which is generated by a given instrument but is not required for image processing. This data is included to maintain integrity of the original dataset, making SPIF a suitable format for long term archiving.</p>
</dd>
<dt><a class="reference external" href="level0">level-0</a></dt><dd><p>Particle information and derived parameters in units of <code class="docutils literal notranslate"><span class="pre">pixels</span></code>/<code class="docutils literal notranslate"><span class="pre">slices</span></code>. Coordinate variable is <code class="docutils literal notranslate"><span class="pre">particle</span></code>.</p>
</dd>
<dt>level-1</dt><dd><p>Particle information and derived parameters in physical units. Coordinate variable is <code class="docutils literal notranslate"><span class="pre">particle</span></code>.</p>
</dd>
<dt>level-2</dt><dd><p>Higher-level, possibly aggregated, data products derived from <code class="docutils literal notranslate"><span class="pre">level-1</span></code>. Coordinate variable is (probably) <code class="docutils literal notranslate"><span class="pre">time</span></code>.</p>
</dd>
</dl>
</div></blockquote>
<div class="section" id="spif-root-attributes">
<span id="root"></span><h2>SPIF Root Attributes<a class="headerlink" href="#spif-root-attributes" title="Permalink to this headline">¶</a></h2>
<p>Each SPIF file has a standardised set of attributes in the root. These attributes are;</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">Conventions</dt>
<dd class="field-odd"><p>“SPIF-n.m”        (where n.m is the specification version)</p>
</dd>
<dt class="field-even">title</dt>
<dd class="field-even"><p>Short description of dataset contents</p>
</dd>
<dt class="field-odd">institution</dt>
<dd class="field-odd"><p>Where the data orginated</p>
</dd>
<dt class="field-even">source</dt>
<dd class="field-even"><p>Name and version of software/hardware used to generate this dataset</p>
</dd>
<dt class="field-odd">history</dt>
<dd class="field-odd"><p>Audit trail of file modifications</p>
</dd>
<dt class="field-even">references</dt>
<dd class="field-even"><p>References of any documents describing the data and production of this dataset</p>
</dd>
<dt class="field-odd">comment</dt>
<dd class="field-odd"><p>Any further information pertaining to this data</p>
</dd>
</dl>
</div></blockquote>
<p>Any other attributes that apply to this dataset can be included in the root.</p>
</div>
<div class="section" id="instrument-channel-group">
<span id="instrument"></span><h2>Instrument Channel Group<a class="headerlink" href="#instrument-channel-group" title="Permalink to this headline">¶</a></h2>
<p>The root of the instrument channel group contains attributes pertaining to that specific instrument/channel. It may also include information about the probe software module that was used to create the file.</p>
<p>Instrument group attributes are currently not mandatory but may include;</p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">instrument_name</dt>
<dd class="field-odd"><p>Short name of instrument</p>
</dd>
<dt class="field-even">instrument_long_name</dt>
<dd class="field-even"><p>Full descriptive name of instrument</p>
</dd>
<dt class="field-odd">instrument_channel</dt>
<dd class="field-odd"><p>Instrument channel (if applicable)</p>
</dd>
<dt class="field-even">instrument_serial_number</dt>
<dd class="field-even"><p>Serial number or instrument identifier</p>
</dd>
<dt class="field-odd">manufacturer</dt>
<dd class="field-odd"><p>Manufacturer of instrument</p>
</dd>
<dt class="field-even">instrument_firmware</dt>
<dd class="field-even"><p>Instrument firmware version</p>
</dd>
<dt class="field-odd">instrument_software</dt>
<dd class="field-odd"><p>Name and version of data acquisition software interfacing with instrument</p>
</dd>
<dt class="field-even">institution</dt>
<dd class="field-even"><p>Institution operating instrument</p>
</dd>
<dt class="field-odd">platform</dt>
<dd class="field-odd"><p>Name or description of platform instrument is mounted on</p>
</dd>
<dt class="field-even">raw_filenames</dt>
<dd class="field-even"><p>Raw data filename(s) used to generate the current instrument dataset</p>
</dd>
<dt class="field-odd">references</dt>
<dd class="field-odd"><p>Link to web, paper, document reference describing instrument</p>
</dd>
<dt class="field-even">comment</dt>
<dd class="field-even"><p>Any further notes about instrument, platform, location, orientation, etc;</p>
</dd>
</dl>
</div></blockquote>
<p>Universal variables may also be included in the instrument group root. For example;</p>
<p><strong>Dimensions:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">pixel</div>
<div class="line">bit</div>
</div>
</div></blockquote>
<p><strong>Variables:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>int</em> <strong>value</strong> (bit)</div>
<div class="line-block">
<div class="line"><strong>bit</strong>:long_name = “Value of shadow level in image array” ;</div>
<div class="line"><strong>bit</strong>:ancillary_variables = shadow;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>shadow</strong> (bit)</div>
<div class="line-block">
<div class="line"><strong>shadow</strong>:long_name = “Fractional obscuration of photodiode array for each bit value” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>start_time</strong></div>
<div class="line-block">
<div class="line"><strong>start_time</strong>:long_name = “Reference datetime of image data” ;</div>
<div class="line"><strong>start_time</strong>:units = “seconds since &lt;reference datetime&gt;” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>resolution</strong></div>
<div class="line-block">
<div class="line"><strong>resolution</strong>:long_name = “Physical resolution of array pixels” ;</div>
<div class="line"><strong>resolution</strong>:units = “micrometer” ;</div>
<div class="line"><strong>resolution</strong>:ancillary_variables = instrument/resolution_err ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>resolution_err</strong></div>
<div class="line-block">
<div class="line"><strong>resolution_err</strong>:long_name = “Uncertainty of physical resolution of array pixels” ;</div>
<div class="line"><strong>resolution_err</strong>:units = “micrometer” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>array_rate</strong></div>
<div class="line-block">
<div class="line"><strong>array_rate</strong>:long_name = “Temporal clocking rate of imaging array. If an OAP then this, along with airspeed, defines the physical resolution in the flight direction. If 2d image then defines maximum frame rate.” ;</div>
<div class="line"><strong>array_rate</strong>:units = “hertz” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>int</em> <strong>array_size</strong></div>
<div class="line-block">
<div class="line"><strong>array_size</strong>:long_name = “Number of pixels across the imaging array, may be 1d or 2d.” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>int</em> <strong>image_size</strong></div>
<div class="line-block">
<div class="line"><strong>image_size</strong>:long_name = “Number of pixels across an image, may be 1d or 2d. If fixed size then number of pixels, if variable size then _FillValue” ;</div>
<div class="line"><strong>image_size</strong>:_FillValue = 0 ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>wavelength</strong></div>
<div class="line-block">
<div class="line"><strong>wavelength</strong>:long_name = “Operating wavelength of laser used for shadowing/imaging the particles” ;</div>
<div class="line"><strong>wavelength</strong>:units = “nanometer” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>arm_separation</strong></div>
<div class="line-block">
<div class="line"><strong>arm_separation</strong>:long_name = “Physical distance between probe arms” ;</div>
<div class="line"><strong>arm_separation</strong>:units = “millimeter” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>boolean</em> <strong>antishatter_tips</strong></div>
<div class="line-block">
<div class="line"><strong>antishatter_tips</strong>:long_name = “Use of antishatter-, or Korolev-, tips on probe arms” ;</div>
</div>
</div>
</div></blockquote>
<div class="section" id="instrument-core-group">
<span id="core"></span><h3>Instrument Core Group<a class="headerlink" href="#instrument-core-group" title="Permalink to this headline">¶</a></h3>
<div class="warning admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>Should this <code class="docutils literal notranslate"><span class="pre">core</span></code> group exist or just have all the raw data in the <code class="docutils literal notranslate"><span class="pre">instrument</span></code> group root?</p>
</div>
<p>The instrument <code class="docutils literal notranslate"><span class="pre">core</span></code> group contains the raw image data. Variables should exist for all of the information contained for each image in the source binary file. Thus this is a true raw dataset. The unlimited dimensions are <code class="docutils literal notranslate"><span class="pre">image_num</span></code> and <code class="docutils literal notranslate"><span class="pre">pixel</span></code> where <code class="docutils literal notranslate"><span class="pre">max(image_num)</span></code> is the number of images in the dataset and <code class="docutils literal notranslate"><span class="pre">max(pixel)</span></code> is the total number of pixels of data in the flattened image array.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each image may in fact contain multiple particles. As the <code class="docutils literal notranslate"><span class="pre">core</span></code> group is entirely raw data, there has been no processing to split out the multiple particles from a single image.</p>
</div>
<p>The arrival time of each image is given by <code class="docutils literal notranslate"><span class="pre">time</span></code>. The units are in nanoseconds from the reference <code class="docutils literal notranslate"><span class="pre">start\_time</span></code>, this is defined in the <code class="docutils literal notranslate"><span class="pre">time:units</span></code> attribute using the CF format.</p>
<p>Variables in the <code class="docutils literal notranslate"><span class="pre">core</span></code> group include;</p>
<p><strong>Dimensions:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">image_num</div>
</div>
</div></blockquote>
<p><strong>Variables:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>int</em> <strong>image</strong> (pixel)</div>
<div class="line-block">
<div class="line"><strong>image</strong>:long_name = “Flattened 1d array of images” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>timestamp</strong> (image_num)</div>
<div class="line-block">
<div class="line"><strong>time</strong>:standard_name = “time” ;</div>
<div class="line"><strong>time</strong>:timezone = “UTC” ;</div>
<div class="line"><strong>time</strong>:long_name = “image arrival time in nanoseconds from reference start time” ;</div>
<div class="line"><strong>time</strong>:units = “nanoseconds since &lt;start_time&gt;” ;</div>
<div class="line"><strong>time</strong>:ancillary_variables = instrument/start_time ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>int</em> <strong>startpixel</strong> (image_num)</div>
<div class="line-block">
<div class="line"><strong>startpixel</strong>:long_name = “Array index of first image slice” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>int</em> <strong>width</strong> (image_num)</div>
<div class="line-block">
<div class="line"><strong>width</strong>:long_name = “Number of pixels across image” ;</div>
<div class="line"><strong>width</strong>:units = “pixels” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>int</em> <strong>height</strong> (image_num)</div>
<div class="line-block">
<div class="line"><strong>height</strong>:long_name = “Number of slices/lines in image” ;</div>
<div class="line"><strong>height</strong>:units = “lines” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>int</em> <strong>overload</strong> (image_num)</div>
<div class="line-block">
<div class="line"><strong>overload</strong>:long_name = “Data quality flag for each image” ;</div>
<div class="line"><strong>overload</strong>:flag_values = “0, 1” ;</div>
<div class="line"><strong>overload</strong>:flag_meanings, “good bad” ;</div>
</div>
</div>
</div></blockquote>
<div class="admonition-a-word-on-data-types admonition">
<p class="admonition-title">A word on data types</p>
<p>The above dtypes are given in the broadest terms as the definitions do not <em>require</em> a specific type of <em>integer</em> or <em>float</em>. However, significant savings in terms of file size and memory usage can be made by using the following dtypes (given in terms of <a class="reference external" href="http://unidata.github.io/netcdf4-python/#variables-in-a-netcdf-file">netCDF</a> and <a class="reference external" href="https://numpy.org/doc/stable/reference/arrays.scalars.html">numpy</a> dtypes);</p>
<blockquote>
<div><div class="line-block">
<div class="line"><strong>image</strong>: ‘u1’ or np.uint8</div>
<div class="line"><strong>timestamp</strong>: ‘f4’ or np.float32</div>
<div class="line"><strong>startpixel</strong>: ‘u8’ or np.uint64</div>
<div class="line"><strong>width</strong>: ‘u4’ or np.uint32</div>
<div class="line"><strong>height</strong>: ‘u4’ or np.uint32</div>
<div class="line"><strong>flag</strong>: ‘u1’ or np.uint8</div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="auxillary-data-group">
<span id="aux"></span><h3>Auxillary Data Group<a class="headerlink" href="#auxillary-data-group" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">aux</span></code> group is an optional SPIF feature.</p>
</div>
<p>The instrument <code class="docutils literal notranslate"><span class="pre">aux</span></code> group contains auxiliary data relevant to a given instrument. This data may be included to maintain integrity of the original dataset, making SPIF a suitable format for long term archiving. This group has its own <code class="docutils literal notranslate"><span class="pre">time</span></code> coordinate; this accommodates 1 Hz one dimensional data that may be transmitted in parallel to the two dimensional image data. The <code class="docutils literal notranslate"><span class="pre">aux</span></code> group is optional and may include useful data such as;</p>
<blockquote>
<div><ul class="simple">
<li><p>Housekeeping data</p></li>
<li><p>Buffer time stamps</p></li>
<li><p>Image counters</p></li>
<li><p>Data acquisition timing words</p></li>
<li><p>Temperature</p></li>
<li><p>Altitude</p></li>
<li><p>Air speed</p></li>
</ul>
</div></blockquote>
<div class="section" id="auxillary-air-speed-data">
<span id="tas"></span><h4>Auxillary Air Speed Data<a class="headerlink" href="#auxillary-air-speed-data" title="Permalink to this headline">¶</a></h4>
<p>The speed at which particles travel through the probe sample volume is an important parameter for further processing. It allows;</p>
<blockquote>
<div><ul class="simple">
<li><p>the <code class="docutils literal notranslate"><span class="pre">array_rate</span></code> of an OAP to be converted into physical resolution and so particles sizes to be calculated,</p></li>
<li><p>the calculation of sample volume and so higher-order microphysical parameters like particle number concentration, liquid water content, etc.</p></li>
</ul>
</div></blockquote>
<p>Airspeed, particularly when it comes to aircraft, is hardly straight forward however in this situation we are interested in true airspeed (TAS) and probe airspeed (PAS). The airspeed at the probe may not be the same as that at a more central location due to local flow perturbations. Post-flight corrections may be required to the TAS applied at time of measurement to comensate for this and other effects.</p>
<div class="warning admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Two options exist here, firstly a <strong>TAS_corrected</strong> variable that may not be present if no correction applicable. Or a <strong>TAS_correction</strong> variable that is alway present but which has a default of 1.</p>
</div>
<p>If TAS is included then it should have the following form;</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>float</em> <strong>TAS_original</strong> (time)</div>
<div class="line-block">
<div class="line"><strong>TAS_original</strong>:long_name = “True Air Speed (TAS) as applied to the auxilary data at time of acquisition” ;</div>
<div class="line"><strong>TAS_original</strong>:units = “m/s” ;</div>
<div class="line"><strong>TAS_original</strong>:ancillary_variables = instrument/aux/TAS_correction ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>TAS_correction</strong> (time)</div>
<div class="line-block">
<div class="line"><strong>TAS_correction</strong>:long_name = “Correction factor for true air speed at the probe. Probe Air Speed (PAS) is TAS_original * TAS_correction. Default is 1.” ;</div>
<div class="line"><strong>TAS_correction</strong>:units = “dimensionless” ;</div>
<div class="line"><strong>TAS_correction</strong>:_Fillvalue = 1 ;</div>
<div class="line"><strong>TAS_correction</strong>:ancillary_variables = instrument/aux/TAS_original ;</div>
</div>
</div>
</div></blockquote>
<p>or</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>float</em> <strong>TAS_corrected</strong> (time)</div>
<div class="line-block">
<div class="line"><strong>TAS_corrected</strong>:long_name = “Corrected true air speed at the probe.” ;</div>
<div class="line"><strong>TAS_corrected</strong>:units = “m/s” ;</div>
</div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="level-0-processed-data-group">
<span id="level0"></span><h3>Level-0 Processed Data Group<a class="headerlink" href="#level-0-processed-data-group" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">level-0</span></code> group is an optional SPIF feature.</p>
</div>
<p>Following extraction of image data into SPIF format, images can be analyzed to extract information about the particles they contain. At the most basic level, parameters of interest describe geometric and physical measurements of the identified particles. Thus, the level 0 data contains basic information about identified particles such as;</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#diameters">Diameters</a> (more discussion on this below)</p></li>
<li><p>Area</p></li>
<li><p>Perimeter</p></li>
<li><p>Bounding box within image</p></li>
<li><p>Orientation</p></li>
<li><p>Right edge pixel count</p></li>
<li><p>Left edge pixel count</p></li>
<li><p>Center-in (boolean)</p></li>
<li><p>All-in (boolean)</p></li>
</ul>
</div></blockquote>
<p>Note that the level 0 particles are sized using number of pixels - conversion to sizing in microns takes place in Level 1.</p>
<p>Each of the parameters discussed above applies to individual particles. For most imaging probes there can be multiple particles in a single image. Given this <em>n</em>-to-one relationship, the Level 0 particle data will require use of a new dimension corresponding to the number of particles detected, which is likely to be different than the number of images captured. The particles dimension thus covers all parameters described in this section. With the additional dimension, there is a need for supplemental parameters which describe the relationship of detected particles to their original image, both in terms of a reference to the additional image, as well as a more exact temporal location, based on the particle’s location in the image frame.</p>
<p>A list of possible level 0 variables are given on <a class="reference internal" href="spif_optional_params.html"><span class="doc">this page</span></a>.</p>
<p>Variables in the <code class="docutils literal notranslate"><span class="pre">level0</span></code> group may include;</p>
<p><strong>Dimensions:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">particle_num</div>
</div>
</div></blockquote>
<p><strong>Variables:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>int</em> <strong>image_index</strong> (particle_num)</div>
<div class="line-block">
<div class="line"><strong>image_index</strong>:long_name = “Reference to image_num index of image containing current particle” ;</div>
<div class="line"><strong>image_index</strong>:ancillary_variables = instrument/core/image_num ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>N_p</strong> (particle_num)</div>
<div class="line-block">
<div class="line"><strong>N_p</strong>:long_name = “Max diameter of particle in the photodiode-array dimension” ;</div>
<div class="line"><strong>N_p</strong>:units = “pixels” ;</div>
<div class="line"><strong>N_p</strong>:references =  ;</div>
</div>
</div>
</div></blockquote>
</div>
<div class="section" id="level-1-processed-data-group">
<span id="level1"></span><h3>Level-1 Processed Data Group<a class="headerlink" href="#level-1-processed-data-group" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">level-1</span></code> group is an optional SPIF feature.</p>
</div>
<p>Whereas Level 0 data presents particle information as simply properties of an image, Level 1 contains particle properties linked to physical, real-world quantities. In Level 1, there are two primary categories of data:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Particle properties scaled to physical dimensions (μm, etc.) using the resolution of the instrument,</p></li>
<li><p>Parameters classifying particles into habits or other categories.</p></li>
</ol>
</div></blockquote>
<p>As discussed in <a class="reference internal" href="#tas">tas</a>, when generating scaled particle properties, care must be taken to correct for improper scaling in the image time direction due to inconsistencies between the probe sampling rate and the speed of the aircraft. These inconsistencies can happen for various reasons the most common include; exceeding TAS limits of the probe, having incorrect or constant airspeed inputs supplied to the probe, or problems with local pitot measurements due to icing or other blockages.</p>
<p>As the <code class="docutils literal notranslate"><span class="pre">level-1</span></code> group is a sub-group of <code class="docutils literal notranslate"><span class="pre">level-0</span></code>, the <code class="docutils literal notranslate"><span class="pre">level-1</span></code> group inherits the <code class="docutils literal notranslate"><span class="pre">particle_num</span></code> dimension. A <code class="docutils literal notranslate"><span class="pre">pas</span></code> (or probe air speed) variable gives the correct true air speed at the probe for each particle derived from the TAS variables in the <code class="docutils literal notranslate"><span class="pre">aux</span></code> group.</p>
<div class="warning admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>The PAS variable is just an idea…</p>
</div>
<p>A list of possible level 0 variables are given on <a class="reference internal" href="spif_optional_params.html"><span class="doc">this page</span></a> and may include for example;</p>
<p><strong>Variables:</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>int</em> <strong>PAS</strong> (particle_num)</div>
<div class="line-block">
<div class="line"><strong>PAS</strong>:long_name = “Probe Air Speed (PAS) derived from the True Air Speed (TAS) variables in the auxilary data group” ;</div>
<div class="line"><strong>PAS</strong>:units = “m/s” ;</div>
</div>
</div>
<div class="line-block">
<div class="line"><em>float</em> <strong>D_p</strong> (particle_num)</div>
<div class="line-block">
<div class="line"><strong>D_p</strong>:long_name = “Max diameter of particle in the photodiode-array dimension” ;</div>
<div class="line"><strong>D_p</strong>:units = “um” ;</div>
<div class="line"><strong>D_p</strong>:equivalent_name = “D_y, L5” ;</div>
<div class="line"><strong>D_p</strong>:references =  ;</div>
</div>
</div>
</div></blockquote>
</div>
<div class="section" id="diameter-definitions">
<span id="diameters"></span><h3>Diameter definitions<a class="headerlink" href="#diameter-definitions" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Interpretation of particle diameter presents a challenge, as there are currently several definitions of particle diameter in use by the community, and a standard definition likely isn’t reasonable, since different diameters are useful depending on the measurement scenario. Thus, to make SPIF useful to the broader community, it may include a wide set of diameters in use by the community. An additional consideration for the inclusion of various particle diameters is how these diameters are named. Throughout the literature, varying names have been given to essentially identical diameters. In the diameter definitions here, an attempt will be made to standardize the names, while referencing other names used for a given diameter definition.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Pixel Diameter</p></th>
<th class="head"><p>Physical diameter</p></th>
<th class="head"><p>Definition</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(N_p\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_p\)</span></p></td>
<td><p>Maximum diameter in the
photodiode-array dimension.
Equivalent to <span class="math notranslate nohighlight">\(N_y\)</span>/<span class="math notranslate nohighlight">\(D_y\)</span> <a class="footnote-reference brackets" href="#id14" id="id4">1</a>, <a class="footnote-reference brackets" href="#id15" id="id5">2</a> and <span class="math notranslate nohighlight">\(L_5\)</span> <a class="footnote-reference brackets" href="#id16" id="id6">3</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(N_t\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_t\)</span></p></td>
<td><p>Maximum diameter in the time
dimension. Equivalent to <span class="math notranslate nohighlight">\(N_x\)</span>/<span class="math notranslate nohighlight">\(D_x\)</span> <a class="footnote-reference brackets" href="#id14" id="id7">1</a>, <a class="footnote-reference brackets" href="#id15" id="id8">2</a> and <span class="math notranslate nohighlight">\(L_1\)</span> <a class="footnote-reference brackets" href="#id16" id="id9">3</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(N_{eq}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_{eq}\)</span></p></td>
<td><p>Diameter of circle with area
equivalent to particle area.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(N_s\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_s\)</span></p></td>
<td><p>Diameter of minimum enclosing
circle. Equivalent to <span class="math notranslate nohighlight">\(N_{max}\)</span>/<span class="math notranslate nohighlight">\(D_{max}\)</span> <a class="footnote-reference brackets" href="#id17" id="id10">4</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(N_h\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_h\)</span></p></td>
<td><p>Hypotenuse of triangle formed by
<span class="math notranslate nohighlight">\(N_p\)</span> and <span class="math notranslate nohighlight">\(N_t\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(N_m\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_m\)</span></p></td>
<td><p>Mean of <span class="math notranslate nohighlight">\(N_p\)</span> and
<span class="math notranslate nohighlight">\(N_t\)</span>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(N_{\scriptsize\mbox{slice_count}}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_{\scriptsize\mbox{slice_count}}\)</span></p></td>
<td><p>Diameter in slice with maximum
number of shaded pixels. Equivalent to <span class="math notranslate nohighlight">\(L_2\)</span> <a class="footnote-reference brackets" href="#id16" id="id11">3</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(N_{\scriptsize\mbox{slice_diff}}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_{\scriptsize\mbox{slice_diff}}\)</span></p></td>
<td><p>Diameter in slice with greatest
pixel separation. Equivalent to <span class="math notranslate nohighlight">\(L_4\)</span> <a class="footnote-reference brackets" href="#id16" id="id12">3</a>.</p></td>
</tr>
<tr class="row-even"><td><p><span class="math notranslate nohighlight">\(N_{\scriptsize\mbox{reconst}}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_{\scriptsize\mbox{reconst}}\)</span></p></td>
<td><p>Reconstructed circle diameter
for center-in particles.</p></td>
</tr>
<tr class="row-odd"><td><p><span class="math notranslate nohighlight">\(N_{\scriptsize\mbox{hole}}\)</span></p></td>
<td><p><span class="math notranslate nohighlight">\(D_{\scriptsize\mbox{hole}}\)</span></p></td>
<td><p>Max hole diameter as defined in
<a class="footnote-reference brackets" href="#id18" id="id13">5</a>.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<dl class="footnote brackets">
<dt class="label" id="id14"><span class="brackets">1</span><span class="fn-backref">(<a href="#id4">1</a>,<a href="#id7">2</a>)</span></dt>
<dd><p>Korolev, A., Isaac, G.A. and Hallett, J. “Ice particle habits in stratiform clouds”, Q.J.R. Meteorol. Soc., 126, 2873-2902, doi:10.1002/qj.49712656913, 2000.</p>
</dd>
<dt class="label" id="id15"><span class="brackets">2</span><span class="fn-backref">(<a href="#id5">1</a>,<a href="#id8">2</a>)</span></dt>
<dd><p>Leroy, D., E. Fontaine, A. Schwarzenboeck, and J. W. Strapp. “Ice Crystal Sizes in High Ice Water Content Clouds. Part I: On the Computation of Median Mass Diameter from In Situ Measurements”, J. Atmos. Oceanic Technol., 33, 11, 2461-2476, doi:JTECH-D-15-0151.1, 2016.</p>
</dd>
<dt class="label" id="id16"><span class="brackets">3</span><span class="fn-backref">(<a href="#id6">1</a>,<a href="#id9">2</a>,<a href="#id11">3</a>,<a href="#id12">4</a>)</span></dt>
<dd><p>Lawson, R. P. “Effects of ice particles shattering on the 2D-S probe”, Atmos. Meas. Tech., 4, 1361-1381, doi:10.5194/amt-4-1361-2011, 2011.</p>
</dd>
<dt class="label" id="id17"><span class="brackets"><a class="fn-backref" href="#id10">4</a></span></dt>
<dd><p>Heymsfield, A. J., Schmitt, C. and Bansemer, A. “Ice Cloud Particle Size Distributions and Pressure-Dependent Terminal Velocities from In Situ Observations at Temperatures from 0° to -86°C”, J. Atmos. Oceanic Technol., 70, 4123-4154, doi:10.1175/JAS-D-12-0124.1, 2013.</p>
</dd>
<dt class="label" id="id18"><span class="brackets"><a class="fn-backref" href="#id13">5</a></span></dt>
<dd><p>Korolev, A. V. “Reconstruction of the sizes of spherical particles from their shadow images Part I: Theoretical considerations”, J. Atmos. Oceanic Technol., 24, 376-389, doi:10.1175/JTECH1980.1, 2007.</p>
</dd>
</dl>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SPIF File Definition</a><ul>
<li><a class="reference internal" href="#spif-root-attributes">SPIF Root Attributes</a></li>
<li><a class="reference internal" href="#instrument-channel-group">Instrument Channel Group</a><ul>
<li><a class="reference internal" href="#instrument-core-group">Instrument Core Group</a></li>
<li><a class="reference internal" href="#auxillary-data-group">Auxillary Data Group</a><ul>
<li><a class="reference internal" href="#auxillary-air-speed-data">Auxillary Air Speed Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#level-0-processed-data-group">Level-0 Processed Data Group</a></li>
<li><a class="reference internal" href="#level-1-processed-data-group">Level-1 Processed Data Group</a></li>
<li><a class="reference internal" href="#diameter-definitions">Diameter definitions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="structure.html"
                        title="previous chapter">Structure</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/definition.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="structure.html" title="Structure"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Python  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">SPIF Definition</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright undecided.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>